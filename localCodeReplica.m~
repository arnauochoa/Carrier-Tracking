function [cm] = localCodeReplica(prn, kDelay, tC, tVec)

% Initializations

code        = ca_code(prn);
% Code samples
cm          = create_code_samples(code, tVec/tC); %normalize tvec wrt chip duration
% Shift in time
% cm          = circshift(cm, length(cm) - kDelay-1-5220);%-5220 % extra -1 accounts for first sample which is code bit 1023 due to t=0
cm  = [cm(end-kDelay)
end